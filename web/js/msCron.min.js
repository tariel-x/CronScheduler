/*
 =========================================================
 msCronjs
 https://github.com/onterumahendra/CronScheduler
 Copyright (c) 2016 MSquare Solutions
 =========================================================
 */
/*
 * Contributions:
 *  - Onteru Mahendra (msbrother445@gmail.com)
 *  - Padala Mallikarjuna (mallikarjuna.909@gmail.com)
 */
!function(e){e.fn.msCron=function(a){function n(){var a=[{text:"Январь",val:"1"},{text:"Февраль",val:"2"},{text:"Март",val:"3"},{text:"Апрель",val:"4"},{text:"Май",val:"5"},{text:"Июнь",val:"6"},{text:"Июль",val:"7"},{text:"Август",val:"8"},{text:"Сентябрь",val:"9"},{text:"Октябрь",val:"10"},{text:"Ноябрь",val:"11"},{text:"Декабрь",val:"12"}];e(c).find(".months").each(function(){i(this,a)})}function i(a,n){for(var i=0;i<n.length;i++)e(a).append("<option value='"+n[i].val+"'>"+n[i].text+"</option>")}function t(){for(var a=0;60>a;a++)24>a&&e(c).find(".hours").each(function(){e(this).append(s(a))}),e(c).find(".minutes").each(function(){e(this).append(s(a))})}function p(){var a=[{text:"Понедельник",val:"MON"},{text:"Вторник",val:"TUE"},{text:"Среда",val:"WED"},{text:"Четверг",val:"THU"},{text:"Пятница",val:"FRI"},{text:"Суббота",val:"SAT"},{text:"Воскресенье",val:"SUN"}];e(c).find(".week-days").each(function(){i(this,a)})}function l(){var a=[{text:"Первый",val:"1"},{text:"Второй",val:"2"},{text:"Третий",val:"3"},{text:"Четвёртый",val:"4"}];e(c).find(".day-order-in-month").each(function(){i(this,a)})}function d(e){return 1==e.toString().length?"0"+e:e}function s(e){return"<option value='"+e+"'>"+d(e)+"</option>"}function o(){var n,n=e(c).find("ul#msCronTabs li.active a").prop("id"),i="";switch(n){case"msMinutesTab":i="0 0/"+e(c).find("#MinutesInput").val()+" * 1/1 * ? *",n="MINUTES";break;case"msHourlyTab":switch(e(c).find("input:radio[name=HourlyRadio]:checked").val()){case"1":i="0 0 0/"+e(c).find("#HoursInput").val()+" 1/1 * ? *";break;case"2":i="0 "+Number(e(c).find("#AtMinutes").val())+" "+Number(e(c).find("#AtHours").val())+" 1/1 * ? *"}n="HOURLY";break;case"msDailyTab":switch(e(c).find("input:radio[name=DailyRadio]:checked").val()){case"1":i="0 "+Number(e(c).find("#DailyMinutes").val())+" "+Number(e(c).find("#DailyHours").val())+" 1/"+e(c).find("#DaysInput").val()+" * ? *";break;case"2":i="0 "+Number(e(c).find("#DailyMinutes").val())+" "+Number(e(c).find("#DailyHours").val())+" ? * MON-FRI *"}n="DAILY";break;case"msWeeklyTab":var t="";e(c).find("#"+u+"Weekly input:checkbox:checked").each(function(){t+=e(this).val()+","}),t.length>0&&(t=t.substr(0,t.length-1)),i="0 "+Number(e(c).find("#WeeklyMinutes").val())+" "+Number(e(c).find("#WeeklyHours").val())+" ? * "+t+" *",n="WEEKLY";break;case"msMonthlyTab":switch(e(c).find("input:radio[name=MonthlyRadio]:checked").val()){case"1":i="0 "+Number(e(c).find("#MonthlyMinutes").val())+" "+Number(e(c).find("#MonthlyHours").val())+" "+e(c).find("#DayOfMOnthInput").val()+" 1/"+e(c).find("#MonthInput").val()+" ? *";break;case"2":i="0 "+Number(e(c).find("#MonthlyMinutes").val())+" "+Number(e(c).find("#MonthlyHours").val())+" ? 1/"+Number(e(c).find("#EveryMonthInput").val())+" "+e(c).find("#DayInWeekOrder").val()+"#"+e(c).find("#WeekDay").val()+" *"}n="MONTHLY";break;case"msYearlyTab":switch(e(c).find("input:radio[name=YearlyRadio]:checked").val()){case"1":i="0 "+Number(e(c).find("#YearlyMinutes").val())+" "+Number(e(c).find("#YearlyHours").val())+" "+e(c).find("#YearInput").val()+" "+e(c).find("#MonthsOfYear").val()+" ? *";break;case"2":i="0 "+Number(e(c).find("#YearlyMinutes").val())+" "+Number(e(c).find("#YearlyHours").val())+" ? "+e(c).find("#MonthsOfYear2").val()+" "+e(c).find("#DayWeekForYear").val()+"#"+e(c).find("#DayOrderInYear").val()+" *"}n="YEARLY"}a.getCron=i,a.activeTab=n}function r(a,n){i=n.replace(/ +(?= )/g,"").trim();var i=i.split(" ");if(7===i.length)switch(a){case"MINUTES":e(c).find('#msCronTabs a[href="#Minutes"]').tab("show"),n=n.match(/\d+/g),e(c).find("#MinutesInput").val(n[2]);break;case"HOURLY":e(c).find('#msCronTabs a[href="#Hourly"]').tab("show"),n=n.match(/\d+/g),6===n.length?(e(c).find("#HoursInput").val(n[3]),e(c).find("input:radio[name=HourlyRadio][value=1]").prop("checked",!0)):(e(c).find("#AtMinutes ").val(n[1]),e(c).find("#AtHours ").val(n[2]),e(c).find("input:radio[name=HourlyRadio][value=2]").prop("checked",!0));break;case"DAILY":e(c).find('#msCronTabs a[href="#Daily"]').tab("show"),n=n.match(/\d+/g),5===n.length?(e(c).find("#DaysInput").val(n[4]),e(c).find("input:radio[name=DailyRadio][value=1]").prop("checked",!0)):e(c).find("input:radio[name=DailyRadio][value=2]").prop("checked",!0),e(c).find("#DailyHours ").val(n[2]),e(c).find("#DailyMinutes ").val(n[1]);break;case"WEEKLY":e(c).find('#msCronTabs a[href="#Weekly"]').tab("show");var t=n;n=n.match(/\d+/g),e(c).find("#WeeklyMinutes").val(n[1]),e(c).find("#WeeklyHours").val(n[2]),e(c).find("#Weekly input:checkbox").each(function(){t.indexOf(e(this).val())>=0&&e(this).prop("checked",!0)});break;case"MONTHLY":e(c).find('#msCronTabs a[href="#Monthly"]').tab("show"),-1!==n.indexOf("#")?(e(c).find("input:radio[name=MonthlyRadio][value=2]").prop("checked",!0),e(c).find("#DayInWeekOrder").val(n.substring(n.indexOf("#"),n.indexOf("#")-3)),n=n.match(/\d+/g),e(c).find("#WeekDay").val(n[5]),e(c).find("#EveryMonthInput").val(n[4])):(n=n.match(/\d+/g),e(c).find("#DayOfMOnthInput").val(n[3]),e(c).find("#MonthInput").val(n[5]),e(c).find("input:radio[name=MonthlyRadio][value=1]").prop("checked",!0)),e(c).find("#MonthlyHours").val(n[1]),e(c).find("#MonthlyMinutes").val(n[2]);break;case"YEARLY":e(c).find('#msCronTabs a[href="#Yearly"]').tab("show"),-1!==n.indexOf("#")?(e(c).find("input:radio[name=YearlyRadio][value=2]").prop("checked",!0),e(c).find("#DayWeekForYear").val(n.substring(n.indexOf("#"),n.indexOf("#")-3)),n=n.match(/\d+/g),e(c).find("#DayOrderInYear").val(n[4]),e(c).find("#MonthsOfYear2").val(n[3])):(n=n.match(/\d+/g),e(c).find("#MonthsOfYear").val(n[4]),e(c).find("#YearInput").val(n[3]),e(c).find("input:radio[name=YearlyRadio][value=1]").prop("checked",!0)),e(c).find("#YearlyHours").val(n[2]),e(c).find("#YearlyMinutes").val(n[1])}else alert("Invalid Cron Expression..!")}"undefined"==typeof a&&(a={getCron:"",setCron:"",activeTab:"MINUTES"});var c=(e.extend({getCron:"",setCron:"",activeTab:""},a),this),u=e(c).attr("id"),y=e("<div/>",{id:"CronGenMainDiv",style:"padding:15px;"}),h=e("<ul/>",{"class":"nav nav-tabs",id:"msCronTabs"});e("<li/>",{"class":"active"}).html(e('<a id="msMinutesTab" role="tab" data-toggle="tab" href="#'+u+'Minutes">Минуты</a>')).appendTo(h),e("<li/>").html(e('<a id="msHourlyTab" role="tab" data-toggle="tab" href="#'+u+'Hourly">Часы</a>')).appendTo(h),e("<li/>").html(e('<a id="msDailyTab" role="tab" data-toggle="tab" href="#'+u+'Daily">Дни</a>')).appendTo(h),e("<li/>").html(e('<a id="msWeeklyTab" role="tab" data-toggle="tab" href="#'+u+'Weekly">Недели</a>')).appendTo(h),e("<li/>").html(e('<a id="msMonthlyTab" role="tab" data-toggle="tab" href="#'+u+'Monthly">Месяцы</a>')).appendTo(h),e("<li/>").html(e('<a id="msYearlyTab" role="tab" data-toggle="tab" href="#'+u+'Yearly">Годы</a>')).appendTo(h),e(h).appendTo(y);var v=e("<div/>",{"class":"tab-content"}),f=e("<div/>",{"class":"tab-pane active",id:u+"Minutes"}),b=e("<div/>",{style:"padding:15px"});e(b).append("Каждую&nbsp;"),e("<input/>",{id:"MinutesInput",type:"text",value:"1","class":"form-control",style:"width: 40px;display:inline"}).appendTo(b),e(b).append("&nbsp;минуту"),e(b).appendTo(f),e(f).appendTo(v);var m=e("<div/>",{"class":"tab-pane",id:u+"Hourly"}),x=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"1",name:"HourlyRadio",checked:"checked"}).appendTo(x),e(x).append("&nbsp;Каждый&nbsp;"),e("<input/>",{id:"HoursInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline"}).appendTo(x),e(x).append("&nbsp;час"),e(x).appendTo(m);var T=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"2",name:"HourlyRadio"}).appendTo(T),e(T).append("&nbsp;В&nbsp;"),e(T).append('<select id="AtHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(T).append('<select id="AtMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(T).appendTo(m),e(m).appendTo(v);var g=e("<div/>",{"class":"tab-pane",id:u+"Daily"}),k=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"1",name:"DailyRadio",checked:"checked"}).appendTo(k),e(k).append("&nbsp;Каждый&nbsp;"),e("<input/>",{id:"DaysInput",type:"text",value:"1","class":"form-control",style:"width: 40px;display:inline"}).appendTo(k),e(k).append("&nbsp;день недели"),e(k).appendTo(g);var M=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"2",name:"DailyRadio"}).appendTo(M),e(M).append("&nbsp;Каждый день недели&nbsp;"),e(M).appendTo(g),e(g).append("Время&nbsp;"),e(g).append('<select id="DailyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(g).append('<select id="DailyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(g).appendTo(v);var Y=e("<div/>",{"class":"tab-pane",id:u+"Weekly"}),D=e("<div/>",{style:"padding:15px"}),w=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(D);e("<input/>",{type:"checkbox",value:"MON"}).appendTo(w),e(w).append("Понедельник");var H=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(D);e("<input/>",{type:"checkbox",value:"TUE"}).appendTo(H),e(H).append("Вторник");var I=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(D);e("<input/>",{type:"checkbox",value:"WED"}).appendTo(I),e(I).append("Среда");var O=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(D);e("<input/>",{type:"checkbox",value:"THU"}).appendTo(O),e(O).append("Четверг");var N=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(D);e("<input/>",{type:"checkbox",value:"FRI"}).appendTo(N),e(N).append("Пятница");var R=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(D);e("<input/>",{type:"checkbox",value:"SAT"}).appendTo(R),e(R).append("Суббота");var W=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(D);e("<input/>",{type:"checkbox",value:"SUN"}).appendTo(W),e(W).append("Воскресенье"),e(D).appendTo(Y),e(Y).append("Время&nbsp;"),e(Y).append('<select id="WeeklyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(Y).append('<select id="WeeklyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(Y).appendTo(v);var C=e("<div/>",{"class":"tab-pane",id:u+"Monthly"}),E=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"1",name:"MonthlyRadio",checked:"checked"}).appendTo(E),e(E).append("&nbsp;День&nbsp"),e("<input/>",{id:"DayOfMOnthInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline"}).appendTo(E),e(E).append("&nbsp;каждого&nbsp;"),e("<input/>",{id:"MonthInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline;"}).appendTo(E),e(E).append("&nbsp;месяца"),e(E).appendTo(C);var A=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"2",name:"MonthlyRadio"}).appendTo(A),e(A).append("&nbsp;"),e(A).append('<select id="WeekDay" class="form-control day-order-in-month" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(A).append('<select id="DayInWeekOrder" class="form-control week-days" style="width: 100px;display:inline"></select>'),e(A).append("&nbsp;каждого&nbsp;"),e("<input/>",{id:"EveryMonthInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline;"}).appendTo(A),e(A).append("&nbsp;месяца"),e(A).appendTo(C),e(C).append("Время&nbsp;"),e(C).append('<select id="MonthlyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(C).append('<select id="MonthlyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(C).appendTo(v);var U=e("<div/>",{"class":"tab-pane",id:u+"Yearly"}),L=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"1",name:"YearlyRadio",checked:"checked"}).appendTo(L),e(L).append("&nbsp;Каждый&nbsp"),e(L).append('<select id="MonthsOfYear" class="form-control months" style="width: 150px;display:inline"></select>'),e(L).append("&nbsp;день&nbsp;"),e("<input/>",{id:"YearInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline;"}).appendTo(L),e(L).appendTo(U);var S=e("<div/>",{style:"padding:15px"});return e("<input/>",{type:"radio",value:"2",name:"YearlyRadio"}).appendTo(S),e(S).append("&nbsp;В&nbsp;"),e(S).append('<select id="DayOrderInYear" class="form-control day-order-in-month" style="width: 90px;display:inline;margin-right:5px;"></select>'),e(S).append('<select id="DayWeekForYear" class="form-control week-days" style="width: 100px;display:inline"></select>'),e(S).append("&nbsp;месяц&nbsp;"),e(S).append('<select id="MonthsOfYear2" class="form-control months" style="width: 110px;display:inline"></select>'),e(S).appendTo(U),e(U).append("Время&nbsp;"),e(U).append('<select id="YearlyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(U).append('<select id="YearlyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(U).appendTo(v),e(v).appendTo(y),e(this).html(y),t(),l(),p(),n(),e(c).find("#CronGenMainDiv select,input").change(function(e){o()}),e(c).find("#CronGenMainDiv input").focus(function(e){o()}),""!==a.setCron?r(a.activeTab,a.setCron):o(),a}}(jQuery);
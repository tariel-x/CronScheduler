/*
 =========================================================
 msCronjs
 https://github.com/onterumahendra/CronScheduler
 Copyright (c) 2016 MSquare Solutions
 =========================================================
 */
/*
 * Contributions:
 *  - Onteru Mahendra (msbrother445@gmail.com)
 *  - Padala Mallikarjuna (mallikarjuna.909@gmail.com)
 */
!function(e){e.fn.msCron=function(a){function n(){var a=[{text:"Январь",val:"1"},{text:"Февраль",val:"2"},{text:"Март",val:"3"},{text:"Апрель",val:"4"},{text:"Май",val:"5"},{text:"Июнь",val:"6"},{text:"Июль",val:"7"},{text:"Август",val:"8"},{text:"Сентябрь",val:"9"},{text:"Октябрь",val:"10"},{text:"Ноябрь",val:"11"},{text:"Декабрь",val:"12"}];e(".months").each(function(){t(this,a)})}function t(a,n){for(var t=0;t<n.length;t++)e(a).append("<option value='"+n[t].val+"'>"+n[t].text+"</option>")}function p(){for(var a=0;60>a;a++)24>a&&e(".hours").each(function(){e(this).append(o(a))}),e(".minutes").each(function(){e(this).append(o(a))})}function l(){var a=[{text:"Понедельник",val:"MON"},{text:"Вторник",val:"TUE"},{text:"Среда",val:"WED"},{text:"Четверг",val:"THU"},{text:"Пятница",val:"FRI"},{text:"Суббота",val:"SAT"},{text:"Воскресенье",val:"SUN"}];e(".week-days").each(function(){t(this,a)})}function i(){var a=[{text:"Первый",val:"1"},{text:"Второй",val:"2"},{text:"Третий",val:"3"},{text:"Четвёртый",val:"4"}];e(".day-order-in-month").each(function(){t(this,a)})}function s(e){return 1==e.toString().length?"0"+e:e}function o(e){return"<option value='"+e+"'>"+s(e)+"</option>"}function d(){var n,n=e("ul#msCronTabs li.active a").prop("id"),t="";switch(n){case"msMinutesTab":t="0 0/"+e("#MinutesInput").val()+" * 1/1 * ? *",n="MINUTES";break;case"msHourlyTab":switch(e("input:radio[name=HourlyRadio]:checked").val()){case"1":t="0 0 0/"+e("#HoursInput").val()+" 1/1 * ? *";break;case"2":t="0 "+Number(e("#AtMinutes").val())+" "+Number(e("#AtHours").val())+" 1/1 * ? *"}n="HOURLY";break;case"msDailyTab":switch(e("input:radio[name=DailyRadio]:checked").val()){case"1":t="0 "+Number(e("#DailyMinutes").val())+" "+Number(e("#DailyHours").val())+" 1/"+e("#DaysInput").val()+" * ? *";break;case"2":t="0 "+Number(e("#DailyMinutes").val())+" "+Number(e("#DailyHours").val())+" ? * MON-FRI *"}n="DAILY";break;case"msWeeklyTab":var p="";e("#Weekly input:checkbox:checked").each(function(){p+=e(this).val()+","}),p.length>0&&(p=p.substr(0,p.length-1)),t="0 "+Number(e("#WeeklyMinutes").val())+" "+Number(e("#WeeklyHours").val())+" ? * "+p+" *",n="WEEKLY";break;case"msMonthlyTab":switch(e("input:radio[name=MonthlyRadio]:checked").val()){case"1":t="0 "+Number(e("#MonthlyMinutes").val())+" "+Number(e("#MonthlyHours").val())+" "+e("#DayOfMOnthInput").val()+" 1/"+e("#MonthInput").val()+" ? *";break;case"2":t="0 "+Number(e("#MonthlyMinutes").val())+" "+Number(e("#MonthlyHours").val())+" ? 1/"+Number(e("#EveryMonthInput").val())+" "+e("#DayInWeekOrder").val()+"#"+e("#WeekDay").val()+" *"}n="MONTHLY";break;case"msYearlyTab":switch(e("input:radio[name=YearlyRadio]:checked").val()){case"1":t="0 "+Number(e("#YearlyMinutes").val())+" "+Number(e("#YearlyHours").val())+" "+e("#YearInput").val()+" "+e("#MonthsOfYear").val()+" ? *";break;case"2":t="0 "+Number(e("#YearlyMinutes").val())+" "+Number(e("#YearlyHours").val())+" ? "+e("#MonthsOfYear2").val()+" "+e("#DayWeekForYear").val()+"#"+e("#DayOrderInYear").val()+" *"}n="YEARLY"}a.getCron=t,a.activeTab=n}function r(a,n){t=n.replace(/ +(?= )/g,"").trim();var t=t.split(" ");if(7===t.length)switch(a){case"MINUTES":e('#msCronTabs a[href="#Minutes"]').tab("show"),n=n.match(/\d+/g),e("#MinutesInput").val(n[2]);break;case"HOURLY":e('#msCronTabs a[href="#Hourly"]').tab("show"),n=n.match(/\d+/g),6===n.length?(e("#HoursInput").val(n[3]),e("input:radio[name=HourlyRadio][value=1]").prop("checked",!0)):(e("#AtMinutes ").val(n[1]),e("#AtHours ").val(n[2]),e("input:radio[name=HourlyRadio][value=2]").prop("checked",!0));break;case"DAILY":e('#msCronTabs a[href="#Daily"]').tab("show"),n=n.match(/\d+/g),5===n.length?(e("#DaysInput").val(n[4]),e("input:radio[name=DailyRadio][value=1]").prop("checked",!0)):e("input:radio[name=DailyRadio][value=2]").prop("checked",!0),e("#DailyHours ").val(n[2]),e("#DailyMinutes ").val(n[1]);break;case"WEEKLY":e('#msCronTabs a[href="#Weekly"]').tab("show");var p=n;n=n.match(/\d+/g),e("#WeeklyMinutes").val(n[1]),e("#WeeklyHours").val(n[2]),e("#Weekly input:checkbox").each(function(){p.indexOf(e(this).val())>=0&&e(this).prop("checked",!0)});break;case"MONTHLY":e('#msCronTabs a[href="#Monthly"]').tab("show"),-1!==n.indexOf("#")?(e("input:radio[name=MonthlyRadio][value=2]").prop("checked",!0),e("#DayInWeekOrder").val(n.substring(n.indexOf("#"),n.indexOf("#")-3)),n=n.match(/\d+/g),e("#WeekDay").val(n[5]),e("#EveryMonthInput").val(n[4])):(n=n.match(/\d+/g),e("#DayOfMOnthInput").val(n[3]),e("#MonthInput").val(n[5]),e("input:radio[name=MonthlyRadio][value=1]").prop("checked",!0)),e("#MonthlyHours").val(n[1]),e("#MonthlyMinutes").val(n[2]);break;case"YEARLY":e('#msCronTabs a[href="#Yearly"]').tab("show"),-1!==n.indexOf("#")?(e("input:radio[name=YearlyRadio][value=2]").prop("checked",!0),e("#DayWeekForYear").val(n.substring(n.indexOf("#"),n.indexOf("#")-3)),n=n.match(/\d+/g),e("#DayOrderInYear").val(n[4]),e("#MonthsOfYear2").val(n[3])):(n=n.match(/\d+/g),e("#MonthsOfYear").val(n[4]),e("#YearInput").val(n[3]),e("input:radio[name=YearlyRadio][value=1]").prop("checked",!0)),e("#YearlyHours").val(n[2]),e("#YearlyMinutes").val(n[1])}else alert("Invalid Cron Expression..!")}"undefined"==typeof a&&(a={getCron:"",setCron:"",activeTab:"MINUTES"});var c=(e.extend({getCron:"",setCron:"",activeTab:""},a),e("<div/>",{id:"CronGenMainDiv",style:"padding:15px;"})),u=e("<ul/>",{"class":"nav nav-tabs",id:"msCronTabs"});e("<li/>",{"class":"active"}).html(e('<a id="msMinutesTab" role="tab" data-toggle="tab" href="#Minutes">Минуты</a>')).appendTo(u),e("<li/>").html(e('<a id="msHourlyTab" role="tab" data-toggle="tab" href="#Hourly">Часы</a>')).appendTo(u),e("<li/>").html(e('<a id="msDailyTab" role="tab" data-toggle="tab" href="#Daily">Дни</a>')).appendTo(u),e("<li/>").html(e('<a id="msWeeklyTab" role="tab" data-toggle="tab" href="#Weekly">Недели</a>')).appendTo(u),e("<li/>").html(e('<a id="msMonthlyTab" role="tab" data-toggle="tab" href="#Monthly">Месяцы</a>')).appendTo(u),e("<li/>").html(e('<a id="msYearlyTab" role="tab" data-toggle="tab" href="#Yearly">Годы</a>')).appendTo(u),e(u).appendTo(c);var y=e("<div/>",{"class":"tab-content"}),h=e("<div/>",{"class":"tab-pane active",id:"Minutes"}),v=e("<div/>",{style:"padding:15px"});e(v).append("Каждую&nbsp;"),e("<input/>",{id:"MinutesInput",type:"text",value:"1","class":"form-control",style:"width: 40px;display:inline"}).appendTo(v),e(v).append("&nbsp;минуту"),e(v).appendTo(h),e(h).appendTo(y);var b=e("<div/>",{"class":"tab-pane",id:"Hourly"}),m=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"1",name:"HourlyRadio",checked:"checked"}).appendTo(m),e(m).append("&nbsp;Каждый&nbsp;"),e("<input/>",{id:"HoursInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline"}).appendTo(m),e(m).append("&nbsp;час"),e(m).appendTo(b);var x=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"2",name:"HourlyRadio"}).appendTo(x),e(x).append("&nbsp;В&nbsp;"),e(x).append('<select id="AtHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(x).append('<select id="AtMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(x).appendTo(b),e(b).appendTo(y);var T=e("<div/>",{"class":"tab-pane",id:"Daily"}),g=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"1",name:"DailyRadio",checked:"checked"}).appendTo(g),e(g).append("&nbsp;Каждый&nbsp;"),e("<input/>",{id:"DaysInput",type:"text",value:"1","class":"form-control",style:"width: 40px;display:inline"}).appendTo(g),e(g).append("&nbsp;день"),e(g).appendTo(T);var f=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"2",name:"DailyRadio"}).appendTo(f),e(f).append("&nbsp;Каждый день недели&nbsp;"),e(f).appendTo(T),e(T).append("Время&nbsp;"),e(T).append('<select id="DailyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(T).append('<select id="DailyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(T).appendTo(y);var k=e("<div/>",{"class":"tab-pane",id:"Weekly"}),M=e("<div/>",{style:"padding:15px"}),Y=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"MON"}).appendTo(Y),e(Y).append("Понедельник");var D=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"TUE"}).appendTo(D),e(D).append("Вторник");var w=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"WED"}).appendTo(w),e(w).append("Среда");var H=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"THU"}).appendTo(H),e(H).append("Четверг");var I=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"FRI"}).appendTo(I),e(I).append("Пятница");var O=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"SAT"}).appendTo(O),e(O).append("Суббота");var N=e("<label/>",{"class":"checkbox-inline",style:"margin-right:5px"}).appendTo(M);e("<input/>",{type:"checkbox",value:"SUN"}).appendTo(N),e(N).append("Воскресенье"),e(M).appendTo(k),e(k).append("Время&nbsp;"),e(k).append('<select id="WeeklyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(k).append('<select id="WeeklyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(k).appendTo(y);var R=e("<div/>",{"class":"tab-pane",id:"Monthly"}),W=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"1",name:"MonthlyRadio",checked:"checked"}).appendTo(W),e(W).append("&nbsp;День&nbsp"),e("<input/>",{id:"DayOfMOnthInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline"}).appendTo(W),e(W).append("&nbsp;каждого&nbsp;"),e("<input/>",{id:"MonthInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline;"}).appendTo(W),e(W).append("&nbsp;месяца"),e(W).appendTo(R);var C=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"2",name:"MonthlyRadio"}).appendTo(C),e(C).append("&nbsp;"),e(C).append('<select id="WeekDay" class="form-control day-order-in-month" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(C).append('<select id="DayInWeekOrder" class="form-control week-days" style="width: 100px;display:inline"></select>'),e(C).append("&nbsp;каждого&nbsp;"),e("<input/>",{id:"EveryMonthInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline;"}).appendTo(C),e(C).append("&nbsp;месяца"),e(C).appendTo(R),e(R).append("Время&nbsp;"),e(R).append('<select id="MonthlyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(R).append('<select id="MonthlyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(R).appendTo(y);var E=e("<div/>",{"class":"tab-pane",id:"Yearly"}),A=e("<div/>",{style:"padding:15px"});e("<input/>",{type:"radio",value:"1",name:"YearlyRadio",checked:"checked"}).appendTo(A),e(A).append("&nbsp;Каждый&nbsp"),e(A).append('<select id="MonthsOfYear" class="form-control months" style="width: 150px;display:inline"></select>'),e(A).append("&nbsp;день&nbsp;"),e("<input/>",{id:"YearInput",type:"text","class":"form-control",value:"1",style:"width: 40px;display:inline;"}).appendTo(A),e(A).appendTo(E);var U=e("<div/>",{style:"padding:15px"});return e("<input/>",{type:"radio",value:"2",name:"YearlyRadio"}).appendTo(U),e(U).append("&nbsp;В&nbsp;"),e(U).append('<select id="DayOrderInYear" class="form-control day-order-in-month" style="width: 90px;display:inline;margin-right:5px;"></select>'),e(U).append('<select id="DayWeekForYear" class="form-control week-days" style="width: 100px;display:inline"></select>'),e(U).append("&nbsp;месяц&nbsp;"),e(U).append('<select id="MonthsOfYear2" class="form-control months" style="width: 110px;display:inline"></select>'),e(U).appendTo(E),e(E).append("Время&nbsp;"),e(E).append('<select id="YearlyHours" class="form-control hours" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(E).append('<select id="YearlyMinutes" class="form-control minutes" style="width: 80px;display:inline;margin-right:5px;"></select>'),e(E).appendTo(y),e(y).appendTo(c),e(this).html(c),p(),i(),l(),n(),e("#CronGenMainDiv select,input").change(function(e){d()}),e("#CronGenMainDiv input").focus(function(e){d()}),""!==a.setCron?r(a.activeTab,a.setCron):d(),a}}(jQuery);